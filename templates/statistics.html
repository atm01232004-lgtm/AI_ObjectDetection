<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thống kê - Lịch sử</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<canvas id="bg-canvas"></canvas>

    <div class="app-container stats-container">
        <header class="header">
            <a href="/" class="logo-area">
                <i class="fas fa-brain fa-2x"></i>
                <h1>AI Vision Pro</h1>
            </a>

            <div class="header-actions">
                <a href="/" title="Trang chủ" class="nav-btn {% if request.path == '/' %}active{% endif %}">
                    <i class="fas fa-home"></i>
                </a>

                <a href="/camera" title="Camera AI" id="nav-cam-icon" class="nav-btn {% if request.path == '/camera' %}active{% endif %}">
                    <i class="fas fa-camera"></i>
                </a>

                <a href="/statistics" title="Lịch sử nhận diện" class="nav-btn {% if request.path == '/statistics' %}active{% endif %}">
                    <i class="fas fa-list-alt"></i> </a>

                <div class="divider"></div>

                <span class="user-info">Xin chào, <b>{{ username }}</b></span>

                <a href="/logout" title="Đăng xuất" class="nav-btn" style="color: #ef4444;">
                    <i class="fas fa-sign-out-alt"></i>
                </a>

            </div>

            <div id="global-cam-container" class="hidden" style="position:fixed; top:-1000px;">
                <video id="global-video" autoplay playsinline></video>
                <canvas id="global-canvas"></canvas>
            </div>

        </header>

        <div class="stats-layout">
            <div class="stats-sidebar">
                <div class="sidebar-header">Danh sách ảnh đã lưu</div>
                <ul id="history-list">
                    </ul>
            </div>

            <div class="stats-content">

                <div class="stats-image-area">
                    <button id="btn-toggle-view" class="btn-toggle-img hidden" onclick="toggleImageView()">
                        <i class="fas fa-eye"></i> <span>Xem ảnh gốc</span>
                    </button>

                    <img id="detail-image" src="" alt="Chưa chọn ảnh" class="hidden">

                    <div id="empty-state">
                        <i class="fas fa-image fa-3x"></i>
                        <p>Chọn một mục bên trái để xem chi tiết</p>
                    </div>
                </div>

                <div class="stats-info-area">
                    <div class="info-header">Kết quả chi tiết</div>

                    <div class="info-grid hidden" id="detail-info">
                        <div class="info-col">
                            <p><strong><i class="fas fa-file-alt"></i> Tên ảnh:</strong> <span id="d-name">--</span></p>
                            <p><strong><i class="fas fa-clock"></i> Thời gian:</strong> <span id="d-time">--</span></p>
                            <p><strong><i class="fas fa-server"></i> Nguồn:</strong> <span id="d-source">--</span></p>
                        </div>
                        <div class="info-col">
                            <p><strong><i class="fas fa-building"></i> Văn phòng:</strong> <span id="d-office">--</span></p>
                            <p><strong><i class="fas fa-wifi"></i> IP Camera:</strong> <span id="d-ip">--</span></p>
                        </div>
                        <div class="info-col full-width">
                            <div class="result-box-stats">
                                <span>Vật thể nhận diện:</span>
                                <ul id="d-results"></ul>
                            </div>
                        </div>

                        <button id="btn-delete" class="btn-delete hidden" onclick="deleteCurrentItem()">
                            <i class="fas fa-trash-alt"></i> Xóa ảnh này
                        </button>

                    </div>


                </div>

            </div>


        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"></script>
    <script src="{{ url_for('static', filename='global.js') }}"></script>
    <script src="{{ url_for('static', filename='statistics.js') }}"></script>
    <script src="{{ url_for('static', filename='background.js') }}"></script>

</body>
</html>